export function allPromiseFinish(promiseList) {
  var hasError = false;
  var count = promiseList.length;
  var results = [];
<<<<<<< HEAD

  if (!promiseList.length) {
    return Promise.resolve([]);
  }

=======
  if (!promiseList.length) {
    return Promise.resolve([]);
  }
>>>>>>> df39cc59d83d39822e7971651c56512380ff1719
  return new Promise(function (resolve, reject) {
    promiseList.forEach(function (promise, index) {
      promise.catch(function (e) {
        hasError = true;
        return e;
      }).then(function (result) {
        count -= 1;
        results[index] = result;
<<<<<<< HEAD

        if (count > 0) {
          return;
        }

        if (hasError) {
          reject(results);
        }

=======
        if (count > 0) {
          return;
        }
        if (hasError) {
          reject(results);
        }
>>>>>>> df39cc59d83d39822e7971651c56512380ff1719
        resolve(results);
      });
    });
  });
}